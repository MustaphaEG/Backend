window.mathquill4quill=function(t){var p=(t=t||{}).Quill||window.Quill,m=t.MathQuill||window.MathQuill,y=t.katex||window.katex;return function(t,e){function l(){return t.container.getElementsByClassName("ql-tooltip")[0]}function n(){return l().getElementsByTagName("input")[0]}if(e=e||{},p?m?y?t.options.modules.formula?MutationObserver||(console.log("MutationObserver not defined"),0):(console.log("Formula module not enabled"),0):(console.log("katex.js not loaded"),0):(console.log("MathQuill.js not loaded"),0):(console.log("Quill.js not loaded"),0)){var o,i,r,u,a,d,s=l(),c=(o=e.autofocus||!0,u=r=i=null,{render:function(){if(null==i){var t=n();return function(t){t.style.border="1px solid #ccc",t.style.fontSize="13px",t.style.minHeight="26px",t.style.margin="0px",t.style.padding="3px 5px",t.style.width="170px"}(i=document.createElement("span")),u=t.style.all,function(t){t.setAttribute("style","visibility:hidden;padding:0px;border:0px;width:0px;")}(t),function(t){o&&window.setTimeout(function(){t.focus()},1)}(r=function(t){var e=m.getInterface(2).MathField(i,{handlers:{edit:function(){t.value=e.latex()}}});return e}(t)),function(t,e){e.parentNode.insertBefore(t,e.nextSibling)}(i,t),r}},destroy:function(){null!=i&&(n().setAttribute("style",u),i.remove(),i=null)}}),f=(a=e.operators||[],d=null,{render:function(n){if(null==d&&0!==a.length){var t=l();(function(t){t.style.display="flex",t.style.alignItems="center"})(d=document.createElement("div")),a.forEach(function(t){var e=function(t,e){var n=t[0],l=t[1],o=document.createElement("button");return o.setAttribute("type","button"),y.render(n,o,{throwOnError:!1}),o.onclick=function(){e.cmd(l),e.focus()},o}(t,n);!function(t){t.style.margin="5px",t.style.width="50px",t.style.height="50px",t.style.backgroundColor="#ffffff",t.style.borderColor="#000000",t.style.borderRadius="7px",t.style.borderWidth="2px"}(e),d.appendChild(e)}),t.appendChild(d)}},destroy:function(){null!=d&&(d.remove(),d=null)}});new MutationObserver(function(){if(!s.classList.contains("ql-hidden")&&s.attributes["data-mode"]&&"formula"===s.attributes["data-mode"].value){var t=c.render();f.render(t)}else c.destroy(),f.destroy()}).observe(s,{attributes:!0,attributeFilter:["class","data-mode"]})}}},window.Quill&&(window.Quill.prototype.enableMathQuillFormulaAuthoring=function(t){window.mathquill4quill()(this,t)});
